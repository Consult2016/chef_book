\section{Cookbook file organization}
\label{sec:cookbook-files}

For beginning we will generate cookbook by knife or berks. You can install both by bundler (we already did this in our Chef server kitchens). So, let's create <<my\_cool\_app>> cookbook inside <<site-cookbooks>> dir:

\begin{lstlisting}[language=Bash,label=lst:cookbook-organization1]
$ cd site-cookbooks
$ knife cookbook create my_cool_app -o .
# or another way by berks
$ berks cookbook my_cool_app
\end{lstlisting}

After this you should see inside <<site-cookbooks>> new folder <<my\_cool\_app>>. This is our cookbook, which have such file structure inside:

\begin{lstlisting}[language=Bash,label=lst:cookbook-organization2]
$ ls -l my_cool_app
total 72
drwxr-xr-x  .
drwxr-xr-x  ..
drwxr-xr-x  .git
-rw-r--r--  .gitignore
-rw-r--r--  Berksfile
-rw-r--r--  Gemfile
-rw-r--r--@ LICENSE
-rw-r--r--  README.md
-rw-r--r--  Thorfile
-rw-r--r--  Vagrantfile
drwxr-xr-x  attributes
-rw-r--r--  chefignore
drwxr-xr-x  definitions
drwxr-xr-x  files
drwxr-xr-x  libraries
-rw-r--r--  metadata.rb
drwxr-xr-x  providers
drwxr-xr-x  recipes
drwxr-xr-x  resources
drwxr-xr-x  templates
\end{lstlisting}

Let's consider this structure:

\begin{itemize}
  \item \lstinline!.git! - git repository skeleton (no need to do <<git init>>)
  \item \lstinline!.gitignore! - specifies intentionally untracked files to ignore by Git
  \item \lstinline!Berksfile! - file with cookbook dependencies for berkshelf (used for testing)
  \item \lstinline!Gemfile! - file with gems for bundler (used for testing)
  \item \lstinline!LICENSE! - file contain license information about cookbook
  \item \lstinline!README.md! - file contains information about cookbook. <<.md>> mean \href{http://daringfireball.net/projects/markdown/syntax}{markdown} syntax
  \item \lstinline!Thorfile! - file include tasks for thor gem (toolkit for building command-line interfaces, used for testing)
  \item \lstinline!Vagrantfile! - file describe the type of machine required for a cookbook for vagrant
  \item \lstinline!attributes! - this folder contain ruby files with default cookbook attributes, which you can redefine in environment, role or node attributes
  \item \lstinline!chefignore! - specifies intentionally untracked files to ignore by Chef, Knife
  \item \lstinline!definitions! - this folder contain ruby files which is used to declare resources so they can be added to the resource collection
  \item \lstinline!files! - this folder contain files, which just need transfer to node (used by command \lstinline!cookbook_file!)
  \item \lstinline!libraries! - this folder contain ruby files with Ruby code to be included in a cookbook, either as a way to extend the classes used by the chef-client or to implement a new class directly
  \item \lstinline!metadata.rb! - a file, which contain all information (metadata) about the cookbook: name, dependencies, etc. (it is like gemset for ruby gems, package.json for npm, etc)
  \item \lstinline!providers! - this folder contain providers for chef resources
  \item \lstinline!recipes! - this folder contain recipes of this cookbook
  \item \lstinline!resources! - this folder contain resources for chef (like build-in cron, deploy, etc)
  \item \lstinline!templates! - this folder contain files written in a markup language that allows the contents of a file to be dynamically generated based on variables or complex logic. Used an Embedded Ruby (ERB) templates.
\end{itemize}
